# ğŸš€ HITé¡¹ç›®å‰ç«¯å¼€å‘å¿«é€Ÿæ£€æŸ¥æ¸…å•

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿæ£€æŸ¥

### 1ï¸âƒ£ IDç±»å‹æ£€æŸ¥ (æœ€é‡è¦ï¼)

```typescript
// âŒ ç»å¯¹ç¦æ­¢
const id = Number(route.params.id);
projectId?: number;
function getProject(id: number)

// âœ… å¿…é¡»ä½¿ç”¨
const id = route.params.id as string;
projectId?: string;
function getProject(id: string)
```

### 2ï¸âƒ£ ç”¨æˆ·ä¿¡æ¯æ£€æŸ¥

```typescript
// âŒ ç»å¯¹ç¦æ­¢ç¡¬ç¼–ç 
const userId = 1;
if (userId === 1) {
  /* ç®¡ç†å‘˜ */
}

// âœ… å¿…é¡»ä½¿ç”¨åŠ¨æ€è·å–
const userId = userStore.userId;
if (userStore.roles.includes('SUPER_ADMIN')) {
  /* ç®¡ç†å‘˜ */
}
```

### 3ï¸âƒ£ è·¯ç”±å‚æ•°æ£€æŸ¥

```typescript
// âœ… æ ‡å‡†æ¨¡æ¿
const route = useRoute();
const entityId = route.params.id as string;

onMounted(() => {
  if (!entityId) {
    ElMessage.error('å‚æ•°æ— æ•ˆ');
    router.back();
    return;
  }
  loadData();
});
```

### 4ï¸âƒ£ APIè°ƒç”¨æ£€æŸ¥

```typescript
// âœ… æ ‡å‡†é”™è¯¯å¤„ç†æ¨¡æ¿
const loadData = async () => {
  loading.value = true;
  try {
    const response = await getEntityData(entityId);
    if (response.code === 200) {
      data.value = response.data;
    } else {
      ElMessage.error(response.msg || 'è·å–æ•°æ®å¤±è´¥');
    }
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error);
    ElMessage.error('è·å–æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•');
  } finally {
    loading.value = false;
  }
};
```

---

## ğŸ“‹ æäº¤å‰å¿…æŸ¥æ¸…å•

### TypeScript & ç±»å‹

- [ ] æ‰€æœ‰IDå­—æ®µä½¿ç”¨ `string` ç±»å‹
- [ ] è·¯ç”±å‚æ•°ä½¿ç”¨ `as string` æ–­è¨€
- [ ] æ²¡æœ‰ä½¿ç”¨ `Number()` è½¬æ¢ID
- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯

### ç”¨æˆ·ä¿¡æ¯ & æƒé™

- [ ] ä½¿ç”¨ `userStore.userId` è·å–ç”¨æˆ·ID
- [ ] æ²¡æœ‰ç¡¬ç¼–ç ç”¨æˆ·ID (å¦‚: `userId = 1`)
- [ ] æƒé™åˆ¤æ–­ä½¿ç”¨è§’è‰²è€Œéå›ºå®šID
- [ ] æ·»åŠ ç”¨æˆ·ç™»å½•çŠ¶æ€æ£€æŸ¥

### é”™è¯¯å¤„ç† & ç”¨æˆ·ä½“éªŒ

- [ ] æ‰€æœ‰APIè°ƒç”¨æœ‰try-catch
- [ ] å¼‚æ­¥æ“ä½œæœ‰loadingçŠ¶æ€
- [ ] é”™è¯¯æ—¶æœ‰ç”¨æˆ·å‹å¥½æç¤º
- [ ] è·¯ç”±å‚æ•°éªŒè¯

### APIæ¥å£

- [ ] æ¥å£å®šä¹‰ä¸­IDä¸º `string` ç±»å‹
- [ ] å‡½æ•°å‚æ•°IDä¸º `string` ç±»å‹
- [ ] åˆ é™¤æ“ä½œä½¿ç”¨ `string[]` æ•°ç»„

---

## ğŸ”§ æ–°å»ºæ¨¡å—å¿«é€Ÿæ¨¡æ¿

### APIæ¥å£æ¨¡æ¿

```typescript
// src/api/hit/[moduleName].ts
export interface [ModuleName]Info {
  [moduleName]Id?: string;  // âš ï¸ å¿…é¡»string
  // å…¶ä»–å­—æ®µ...
}

export function get[ModuleName](id: string): AxiosPromise<[ModuleName]Info> {
  return request({
    url: `/hit/[moduleName]/${id}`,
    method: 'get'
  });
}
```

### é¡µé¢ç»„ä»¶æ¨¡æ¿

```vue
<!-- src/views/hit/[moduleName]/index.vue -->
<script setup lang="ts">
import { useRouter, useRoute } from 'vue-router';
import { useUserStore } from '@/store/modules/user';

const router = useRouter();
const route = useRoute();
const userStore = useUserStore();

// âš ï¸ å…³é”®ï¼šIDè·å–
const entityId = route.params.id as string;

// âš ï¸ å…³é”®ï¼šå‚æ•°éªŒè¯
onMounted(() => {
  if (!entityId) {
    ElMessage.error('å‚æ•°æ— æ•ˆ');
    router.back();
    return;
  }
  loadData();
});
</script>
```

---

## ğŸš¨ å¸¸è§é”™è¯¯æé†’

### ç»å¯¹ä¸èƒ½å‡ºç°çš„ä»£ç 

```typescript
âŒ Number(route.params.id)
âŒ parseInt(userId)
âŒ const userId = 1
âŒ projectId?: number
âŒ if (userId === 1)
âŒ æ²¡æœ‰try-catchçš„APIè°ƒç”¨
âŒ æ²¡æœ‰loadingçŠ¶æ€çš„å¼‚æ­¥æ“ä½œ
```

### å¿…é¡»å‡ºç°çš„ä»£ç 

```typescript
âœ… route.params.id as string
âœ… userStore.userId
âœ… projectId?: string
âœ… userStore.roles.includes('ADMIN')
âœ… try-catchåŒ…è£…çš„APIè°ƒç”¨
âœ… loadingçŠ¶æ€ç®¡ç†
```

---

## ğŸ“ é‡åˆ°é—®é¢˜æ—¶

1. **IDç±»å‹é—®é¢˜** â†’ æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†Number()è½¬æ¢
2. **ç²¾åº¦ä¸¢å¤±** â†’ ç¡®è®¤æ‰€æœ‰IDéƒ½æ˜¯stringç±»å‹
3. **æƒé™é—®é¢˜** â†’ æ£€æŸ¥æ˜¯å¦ç¡¬ç¼–ç äº†ç”¨æˆ·ID
4. **è·¯ç”±é”™è¯¯** â†’ æ£€æŸ¥å‚æ•°è·å–å’ŒéªŒè¯
5. **APIé”™è¯¯** â†’ æ£€æŸ¥é”™è¯¯å¤„ç†å’Œç±»å‹å®šä¹‰

**è®°ä½ï¼šIDæ°¸è¿œæ˜¯stringï¼Œç”¨æˆ·ä¿¡æ¯æ°¸è¿œä»storeè·å–ï¼**

---

_ğŸ’¡ å»ºè®®ï¼šå°†æ­¤æ¸…å•ä¿å­˜ä¸ºä¹¦ç­¾ï¼Œæ¯æ¬¡å¼€å‘æ–°åŠŸèƒ½æ—¶éƒ½æ£€æŸ¥ä¸€éï¼_
