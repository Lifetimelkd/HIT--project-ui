# HITé¡¹ç›®å‰ç«¯å¼€å‘è§„èŒƒ

## ğŸ“‹ ç›®å½•

- [1. IDç±»å‹è§„èŒƒ](#1-idç±»å‹è§„èŒƒ)
- [2. APIæ¥å£è§„èŒƒ](#2-apiæ¥å£è§„èŒƒ)
- [3. è·¯ç”±å‚æ•°è§„èŒƒ](#3-è·¯ç”±å‚æ•°è§„èŒƒ)
- [4. TypeScriptç±»å‹è§„èŒƒ](#4-typescriptç±»å‹è§„èŒƒ)
- [5. ç»„ä»¶å¼€å‘è§„èŒƒ](#5-ç»„ä»¶å¼€å‘è§„èŒƒ)
- [6. çŠ¶æ€ç®¡ç†è§„èŒƒ](#6-çŠ¶æ€ç®¡ç†è§„èŒƒ)
- [7. é”™è¯¯å¤„ç†è§„èŒƒ](#7-é”™è¯¯å¤„ç†è§„èŒƒ)
- [8. ä»£ç æ£€æŸ¥æ¸…å•](#8-ä»£ç æ£€æŸ¥æ¸…å•)

---

## 1. IDç±»å‹è§„èŒƒ

### ğŸš« ç¦æ­¢äº‹é¡¹

```typescript
// âŒ é”™è¯¯ï¼šä½¿ç”¨Number()è½¬æ¢ID
const projectId = Number(route.params.id);
const userId = Number(userStore.userId);

// âŒ é”™è¯¯ï¼šåœ¨æ¥å£ä¸­å®šä¹‰IDä¸ºnumberç±»å‹
export interface ProjectInfo {
  projectId?: number; // é”™è¯¯
}

// âŒ é”™è¯¯ï¼šå‡½æ•°å‚æ•°ä½¿ç”¨numberç±»å‹
export function getProject(projectId: number): AxiosPromise<ProjectInfo>;
```

### âœ… æ­£ç¡®åšæ³•

```typescript
// âœ… æ­£ç¡®ï¼šç›´æ¥ä½¿ç”¨stringç±»å‹
const projectId = route.params.id as string;
const userId = userStore.userId; // ä¿æŒåŸå§‹ç±»å‹

// âœ… æ­£ç¡®ï¼šæ¥å£ä¸­IDä½¿ç”¨stringç±»å‹
export interface ProjectInfo {
  projectId?: string; // æ­£ç¡®
}

// âœ… æ­£ç¡®ï¼šå‡½æ•°å‚æ•°ä½¿ç”¨stringç±»å‹
export function getProject(projectId: string): AxiosPromise<ProjectInfo>;

// âœ… æ­£ç¡®ï¼šæ”¯æŒå…¼å®¹æ€§çš„è”åˆç±»å‹
export function getUserSkills(userId: string | number);
```

### ğŸ“ IDç±»å‹è§„åˆ™

1. **æ‰€æœ‰ä¸»é”®IDåœ¨å‰ç«¯ç»Ÿä¸€ä½¿ç”¨ `string` ç±»å‹**
2. **è·¯ç”±å‚æ•°IDç›´æ¥ä½¿ç”¨ `as string` æ–­è¨€**
3. **APIæ¥å£ä¸­çš„IDå‚æ•°å’Œè¿”å›å€¼éƒ½ä½¿ç”¨ `string` ç±»å‹**
4. **æ•°æ®åº“è‡ªå¢IDã€é›ªèŠ±IDç­‰é•¿æ•´å‹IDå¿…é¡»ä½¿ç”¨ `string` ç±»å‹**
5. **å¦‚éœ€å…¼å®¹æ€§ï¼Œä½¿ç”¨ `string | number` è”åˆç±»å‹**

---

## 2. APIæ¥å£è§„èŒƒ

### ğŸ—ï¸ æ¥å£å®šä¹‰æ¨¡æ¿

```typescript
// æ•°æ®æ¥å£æ¨¡æ¿
export interface [EntityName]Info {
  [entityName]Id?: string;          // ä¸»é”®IDä½¿ç”¨string
  // å…¶ä»–å­—æ®µ...
  createTime?: string;              // æ—¶é—´å­—æ®µä½¿ç”¨string
  updateTime?: string;
}

// æŸ¥è¯¢å‚æ•°æ¥å£æ¨¡æ¿
export interface [EntityName]Query {
  pageNum?: number;
  pageSize?: number;
  // æŸ¥è¯¢æ¡ä»¶...
}

// è¡¨å•æ¥å£æ¨¡æ¿
export interface [EntityName]Form {
  [entityName]Id?: string;          // ä¸»é”®IDä½¿ç”¨string
  // è¡¨å•å­—æ®µ...
}
```

### ğŸ”§ APIå‡½æ•°æ¨¡æ¿

```typescript
// æŸ¥è¯¢è¯¦æƒ…
export function get[EntityName](id: string): AxiosPromise<[EntityName]Info> {
  return request({
    url: `/hit/[entityName]/${id}`,
    method: 'get'
  });
}

// æ–°å¢
export function add[EntityName](data: [EntityName]Form): AxiosPromise<string> {
  return request({
    url: '/hit/[entityName]',
    method: 'post',
    data: data
  });
}

// æ›´æ–°
export function update[EntityName](data: [EntityName]Form): AxiosPromise<void> {
  return request({
    url: '/hit/[entityName]',
    method: 'put',
    data: data
  });
}

// åˆ é™¤
export function del[EntityName](ids: string[]): AxiosPromise<void> {
  return request({
    url: `/hit/[entityName]/${ids}`,
    method: 'delete'
  });
}
```

---

## 3. è·¯ç”±å‚æ•°è§„èŒƒ

### âœ… è·¯ç”±å‚æ•°å¤„ç†

```typescript
// ç»„ä»¶ä¸­è·å–è·¯ç”±å‚æ•°
const route = useRoute();
const entityId = route.params.id as string;

// å‚æ•°éªŒè¯
onMounted(() => {
  if (!entityId) {
    ElMessage.error('å‚æ•°æ— æ•ˆ');
    router.back();
    return;
  }
  loadData();
});

// è·¯ç”±è·³è½¬
const handleView = (id: string) => {
  router.push(`/hit/module/detail/${id}`);
};
```

### ğŸ”’ å‚æ•°éªŒè¯è§„åˆ™

1. **æ€»æ˜¯å¯¹è·¯ç”±å‚æ•°è¿›è¡Œç©ºå€¼æ£€æŸ¥**
2. **ä½¿ç”¨ `as string` è¿›è¡Œç±»å‹æ–­è¨€**
3. **å‚æ•°æ— æ•ˆæ—¶æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º**
4. **è·³è½¬è·¯ç”±æ—¶ç¡®ä¿ä¼ é€’æ­£ç¡®çš„å‚æ•°ç±»å‹**

---

## 4. TypeScriptç±»å‹è§„èŒƒ

### ğŸ¯ ç±»å‹å®šä¹‰åŸåˆ™

```typescript
// âœ… ä¸¥æ ¼ç±»å‹å®šä¹‰
interface UserInfo {
  userId: string; // å¿…éœ€å­—æ®µä¸ä½¿ç”¨å¯é€‰
  userName: string;
  email?: string; // å¯é€‰å­—æ®µä½¿ç”¨?
  status: 'active' | 'inactive'; // ä½¿ç”¨è”åˆç±»å‹é™åˆ¶å€¼
}

// âœ… æ³›å‹ä½¿ç”¨
interface ApiResponse<T> {
  code: number;
  msg: string;
  data: T;
}

// âœ… æšä¸¾ä½¿ç”¨
enum ProjectStatus {
  ACTIVE = 'active',
  PAUSED = 'paused',
  COMPLETED = 'completed'
}
```

### ğŸ“‹ ç±»å‹æ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰IDå­—æ®µä½¿ç”¨ `string` ç±»å‹
- [ ] å¿…éœ€å­—æ®µä¸ä½¿ç”¨å¯é€‰æ“ä½œç¬¦ `?`
- [ ] çŠ¶æ€å­—æ®µä½¿ç”¨è”åˆç±»å‹æˆ–æšä¸¾
- [ ] æ—¶é—´å­—æ®µç»Ÿä¸€ä½¿ç”¨ `string` ç±»å‹
- [ ] å¤æ‚å¯¹è±¡ä½¿ç”¨æ¥å£å®šä¹‰
- [ ] APIè¿”å›å€¼ä½¿ç”¨æ³›å‹åŒ…è£…

---

## 5. ç»„ä»¶å¼€å‘è§„èŒƒ

### ğŸ§© ç»„ä»¶ç»“æ„æ¨¡æ¿

```vue
<template>
  <div class="[component-name]-container">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header">
      <!-- å¤´éƒ¨å†…å®¹ -->
    </div>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="main-content">
      <!-- å†…å®¹åŒºåŸŸ -->
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, computed, onMounted } from 'vue';
import { useRouter, useRoute } from 'vue-router';
import { ElMessage } from 'element-plus';
import { useUserStore } from '@/store/modules/user';

// 1. å¯¼å…¥ç±»å‹å’ŒAPI
import type { [EntityName]Info, [EntityName]Form } from '@/api/hit/[entityName]';
import { get[EntityName], add[EntityName] } from '@/api/hit/[entityName]';

// 2. è·¯ç”±å’ŒStore
const router = useRouter();
const route = useRoute();
const userStore = useUserStore();

// 3. å“åº”å¼æ•°æ®
const loading = ref(false);
const entityId = route.params.id as string;

// 4. è¡¨å•æ•°æ®
const form = reactive<[EntityName]Form>({
  // åˆå§‹åŒ–è¡¨å•å­—æ®µ
});

// 5. è®¡ç®—å±æ€§
const computedValue = computed(() => {
  // è®¡ç®—é€»è¾‘
});

// 6. æ–¹æ³•å®šä¹‰
const loadData = async () => {
  // æ•°æ®åŠ è½½é€»è¾‘
};

const handleSubmit = async () => {
  // æäº¤é€»è¾‘
};

// 7. ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  if (entityId) {
    loadData();
  }
});
</script>

<style scoped lang="scss">
.[component-name]-container {
  // æ ·å¼å®šä¹‰
}
</style>
```

### ğŸ”§ ç»„ä»¶å¼€å‘æ£€æŸ¥æ¸…å•

- [ ] ä½¿ç”¨ `<script setup lang="ts">` è¯­æ³•
- [ ] å¯¼å…¥å¿…è¦çš„ç±»å‹å®šä¹‰
- [ ] è·¯ç”±å‚æ•°ä½¿ç”¨ `as string` æ–­è¨€
- [ ] å“åº”å¼æ•°æ®ä½¿ç”¨æ­£ç¡®çš„API
- [ ] å¼‚æ­¥æ“ä½œæ·»åŠ loadingçŠ¶æ€
- [ ] é”™è¯¯å¤„ç†ä½¿ç”¨ElMessage
- [ ] ç»„ä»¶åä½¿ç”¨kebab-case

---

## 6. çŠ¶æ€ç®¡ç†è§„èŒƒ

### ğŸª Storeä½¿ç”¨è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯
const userStore = useUserStore();

// è·å–å½“å‰ç”¨æˆ·IDï¼ˆä¿æŒåŸå§‹ç±»å‹ï¼‰
const currentUserId = userStore.userId;

// ç”¨æˆ·ç™»å½•çŠ¶æ€æ£€æŸ¥
if (!currentUserId) {
  ElMessage.error('ç”¨æˆ·æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•');
  return;
}

// APIè°ƒç”¨æ—¶ç›´æ¥ä¼ é€’
const response = await getUserData(currentUserId);
```

### ğŸš« é¿å…ç¡¬ç¼–ç 

```typescript
// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç ç”¨æˆ·ID
const response = await getUserData(1);

// âŒ é”™è¯¯ï¼šç¡¬ç¼–ç æƒé™åˆ¤æ–­
if (userId === 1) {
  /* è¶…çº§ç®¡ç†å‘˜é€»è¾‘ */
}

// âœ… æ­£ç¡®ï¼šä½¿ç”¨åŠ¨æ€ç”¨æˆ·ID
const response = await getUserData(userStore.userId);

// âœ… æ­£ç¡®ï¼šä½¿ç”¨æƒé™åˆ¤æ–­
if (userStore.roles.includes('SUPER_ADMIN')) {
  /* ç®¡ç†å‘˜é€»è¾‘ */
}
```

---

## 7. é”™è¯¯å¤„ç†è§„èŒƒ

### ğŸ›¡ï¸ ç»Ÿä¸€é”™è¯¯å¤„ç†

```typescript
// APIè°ƒç”¨é”™è¯¯å¤„ç†æ¨¡æ¿
const loadData = async () => {
  loading.value = true;
  try {
    const response = await getEntityData(entityId);
    if (response.code === 200) {
      // æˆåŠŸå¤„ç†
      data.value = response.data;
    } else {
      ElMessage.error(response.msg || 'è·å–æ•°æ®å¤±è´¥');
    }
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error);
    ElMessage.error('è·å–æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•');
  } finally {
    loading.value = false;
  }
};

// è¡¨å•æäº¤é”™è¯¯å¤„ç†æ¨¡æ¿
const handleSubmit = async () => {
  try {
    await formRef.value?.validate();
    loading.value = true;

    const response = await submitData(form);
    if (response.code === 200) {
      ElMessage.success('æ“ä½œæˆåŠŸ');
      router.back();
    } else {
      ElMessage.error(response.msg || 'æ“ä½œå¤±è´¥');
    }
  } catch (error) {
    console.error('æ“ä½œå¤±è´¥:', error);
    ElMessage.error('æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¡¨å•ä¿¡æ¯');
  } finally {
    loading.value = false;
  }
};
```

---

## 8. ä»£ç æ£€æŸ¥æ¸…å•

### ğŸ“ å¼€å‘å‰æ£€æŸ¥æ¸…å•

- [ ] ç¡®è®¤APIæ¥å£è®¾è®¡ï¼Œæ‰€æœ‰IDå­—æ®µä½¿ç”¨stringç±»å‹
- [ ] ç¡®è®¤æ•°æ®åº“è¡¨ç»“æ„ï¼Œé•¿æ•´å‹IDå¯¹åº”å‰ç«¯stringç±»å‹
- [ ] ç¡®è®¤è·¯ç”±è®¾è®¡ï¼Œå‚æ•°ä¼ é€’ä½¿ç”¨stringç±»å‹

### ğŸ” ç¼–ç æ—¶æ£€æŸ¥æ¸…å•

- [ ] è·¯ç”±å‚æ•°è·å–ï¼š`route.params.id as string`
- [ ] APIæ¥å£å®šä¹‰ï¼šæ‰€æœ‰IDå­—æ®µä¸º `string` ç±»å‹
- [ ] å‡½æ•°å‚æ•°ï¼šIDå‚æ•°ä½¿ç”¨ `string` æˆ– `string | number`
- [ ] æ•°æ®ä¼ é€’ï¼šé¿å…ä½¿ç”¨ `Number()` è½¬æ¢ID
- [ ] ç”¨æˆ·ä¿¡æ¯ï¼šä½¿ç”¨ `userStore.userId` è€Œéç¡¬ç¼–ç 
- [ ] é”™è¯¯å¤„ç†ï¼šæ·»åŠ try-catchå’Œç”¨æˆ·å‹å¥½æç¤º
- [ ] åŠ è½½çŠ¶æ€ï¼šå¼‚æ­¥æ“ä½œæ·»åŠ loadingçŠ¶æ€

### âœ… æäº¤å‰æ£€æŸ¥æ¸…å•

- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯
- [ ] ESLintæ£€æŸ¥é€šè¿‡
- [ ] æ‰€æœ‰APIè°ƒç”¨æ·»åŠ é”™è¯¯å¤„ç†
- [ ] ç”¨æˆ·äº¤äº’æœ‰é€‚å½“çš„åé¦ˆ
- [ ] è·¯ç”±è·³è½¬å‚æ•°ç±»å‹æ­£ç¡®
- [ ] æ²¡æœ‰ç¡¬ç¼–ç çš„IDå€¼
- [ ] æ²¡æœ‰ä½¿ç”¨Number()è½¬æ¢ID

### ğŸ§ª æµ‹è¯•æ£€æŸ¥æ¸…å•

- [ ] å¤§æ•´æ•°IDæ˜¾ç¤ºæ­£ç¡®ï¼ˆä¸ä¸¢å¤±ç²¾åº¦ï¼‰
- [ ] è·¯ç”±å‚æ•°ä¼ é€’æ­£ç¡®
- [ ] APIè¯·æ±‚å‚æ•°ç±»å‹æ­£ç¡®
- [ ] é”™è¯¯æƒ…å†µå¤„ç†æ­£å¸¸
- [ ] ç”¨æˆ·æƒé™åˆ¤æ–­æ­£ç¡®
- [ ] åˆ†é¡µåŠŸèƒ½å·¥ä½œæ­£å¸¸

---

## ğŸ“š å‚è€ƒç¤ºä¾‹

### å®Œæ•´çš„CRUDé¡µé¢ç¤ºä¾‹

```typescript
// å®ä½“ç®¡ç†é¡µé¢æ ‡å‡†æ¨¡æ¿
export default defineComponent({
  name: 'EntityManagement',
  setup() {
    // 1. åŸºç¡€è®¾ç½®
    const router = useRouter();
    const route = useRoute();
    const userStore = useUserStore();

    // 2. å“åº”å¼æ•°æ®
    const loading = ref(false);
    const entityList = ref<EntityInfo[]>([]);
    const total = ref(0);
    const dialogVisible = ref(false);
    const isEdit = ref(false);

    // 3. è¡¨å•æ•°æ®
    const form = reactive<EntityForm>({
      entityId: undefined
      // å…¶ä»–å­—æ®µ...
    });

    // 4. æŸ¥è¯¢å‚æ•°
    const queryParams = reactive({
      pageNum: 1,
      pageSize: 10
      // æŸ¥è¯¢æ¡ä»¶...
    });

    // 5. æ•°æ®åŠ è½½
    const loadEntityList = async () => {
      loading.value = true;
      try {
        const response = await getEntityList(queryParams);
        if (response.code === 200) {
          entityList.value = response.rows || [];
          total.value = response.total || 0;
        }
      } catch (error) {
        console.error('è·å–åˆ—è¡¨å¤±è´¥:', error);
        ElMessage.error('è·å–åˆ—è¡¨å¤±è´¥');
      } finally {
        loading.value = false;
      }
    };

    // 6. CRUDæ“ä½œ
    const handleAdd = () => {
      isEdit.value = false;
      resetForm();
      dialogVisible.value = true;
    };

    const handleEdit = (entity: EntityInfo) => {
      isEdit.value = true;
      Object.assign(form, entity);
      dialogVisible.value = true;
    };

    const handleDelete = async (id: string) => {
      try {
        await ElMessageBox.confirm('ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ', 'ç¡®è®¤åˆ é™¤');
        await deleteEntity([id]);
        ElMessage.success('åˆ é™¤æˆåŠŸ');
        loadEntityList();
      } catch (error) {
        if (error !== 'cancel') {
          console.error('åˆ é™¤å¤±è´¥:', error);
          ElMessage.error('åˆ é™¤å¤±è´¥');
        }
      }
    };

    // 7. ç”Ÿå‘½å‘¨æœŸ
    onMounted(() => {
      loadEntityList();
    });

    return {
      // å¯¼å‡ºæ‰€éœ€çš„å“åº”å¼æ•°æ®å’Œæ–¹æ³•
    };
  }
});
```

---

## ğŸ¯ æ€»ç»“

éµå¾ªæ­¤è§„èŒƒå¯ä»¥é¿å…ï¼š

1. âœ… IDç±»å‹ç²¾åº¦ä¸¢å¤±é—®é¢˜
2. âœ… ç¡¬ç¼–ç ç”¨æˆ·IDé—®é¢˜
3. âœ… ç±»å‹å®‰å…¨é—®é¢˜
4. âœ… é”™è¯¯å¤„ç†ç¼ºå¤±é—®é¢˜
5. âœ… ä»£ç ä¸€è‡´æ€§é—®é¢˜

**æ¯æ¬¡åˆ›å»ºæ–°æ¨¡å—æ—¶ï¼Œè¯·ä¸¥æ ¼æŒ‰ç…§æ­¤è§„èŒƒæ‰§è¡Œï¼Œå¹¶ä½¿ç”¨æ£€æŸ¥æ¸…å•è¿›è¡Œè‡ªæ£€ï¼**
